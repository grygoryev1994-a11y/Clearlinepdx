<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>ClearlinePDX – Professional Cleaning in Portland</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="ClearlinePDX provides reliable residential and small commercial cleaning services in Portland, Oregon. Transparent pricing. Quick estimates." />

  <style>
    :root {
      --bg-grad1:#eef5f3;
      --bg-grad2:#f9fbfa;
      --panel: rgba(255,255,255,0.86);
      --panel2: rgba(255,255,255,0.70);
      --accent: #4fa6a0;
      --accent-dark: #2f7f79;
      --text: #1f2d2b;
      --muted: #5f6f6c;
      --border: rgba(0,0,0,0.07);
      --shadow: 0 10px 30px rgba(14, 28, 26, 0.10);
      --radius: 18px;
    }

    * { box-sizing: border-box; }
    html { scroll-behavior: smooth; }

    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, "Inter", "Segoe UI", sans-serif;
      background: linear-gradient(180deg, var(--bg-grad1) 0%, var(--bg-grad2) 100%);
      color: var(--text);
    }

    a { color: inherit; text-decoration: none; }
    a:hover { opacity: 0.92; }

    .container {
      max-width: 1100px;
      margin: 0 auto;
      padding: 0 20px;
    }

    /* NAV */
    .topbar {
      position: sticky;
      top: 0;
      z-index: 30;
      backdrop-filter: blur(10px);
      background: rgba(243, 247, 246, 0.75);
      border-bottom: 1px solid var(--border);
    }
    .topbar-inner {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 14px;
      padding: 12px 0;
    }
    .brand {
      display: inline-flex;
      align-items: center;
      gap: 12px;
      font-weight: 800;
      letter-spacing: 0.2px;
    }
    .brand svg { width: 34px; height: 34px; }

    nav {
      display: flex;
      align-items: center;
      gap: 10px;
      flex-wrap: wrap;
      justify-content: flex-end;
    }
    .navlink {
      padding: 8px 10px;
      border-radius: 12px;
      color: var(--muted);
      border: 1px solid transparent;
    }
    .navlink:hover {
      color: var(--text);
      border-color: var(--border);
      background: rgba(255,255,255,0.6);
    }

    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 10px 14px;
      border-radius: 14px;
      font-weight: 700;
      border: 1px solid rgba(0,0,0,0.06);
      background: linear-gradient(135deg, rgba(79,166,160,0.95), rgba(79,166,160,0.78));
      color: #0b2a27;
      cursor: pointer;
    }
    .btn-ghost {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 10px 14px;
      border-radius: 14px;
      font-weight: 700;
      border: 1px solid var(--border);
      background: rgba(255,255,255,0.6);
      color: var(--text);
      cursor: pointer;
    }

    /* HERO */
    header.hero {
      padding: 56px 0 26px;
      text-align: center;
      background:
        radial-gradient(1200px 500px at 50% 0%, rgba(79,166,160,0.14), rgba(79,166,160,0.00)),
        linear-gradient(rgba(243,247,246,0.90), rgba(243,247,246,0.90)),
        url("https://images.unsplash.com/photo-1600585154340-be6161a56a0c?auto=format&fit=crop&w=1800&q=80");
      background-size: cover;
      background-position: center;
    }

    .hero h1 {
      font-size: 44px;
      margin: 8px 0 10px;
      letter-spacing: -0.6px;
    }
    .hero p.lead {
      max-width: 720px;
      margin: 0 auto 18px;
      font-size: 18px;
      color: var(--muted);
      line-height: 1.6;
    }

    .hero-actions {
      display: flex;
      gap: 10px;
      justify-content: center;
      flex-wrap: wrap;
      margin-top: 10px;
    }

    .badges {
      display: flex;
      gap: 10px;
      justify-content: center;
      flex-wrap: wrap;
      margin-top: 18px;
    }
    .badge {
      background: rgba(255,255,255,0.70);
      border: 1px solid var(--border);
      color: var(--muted);
      padding: 8px 10px;
      border-radius: 999px;
      font-size: 13px;
    }

    section { margin: 46px auto; }
    section h2 {
      text-align: center;
      font-size: 32px;
      margin: 0 0 10px;
      letter-spacing: -0.3px;
    }
    section .subtitle {
      text-align: center;
      color: var(--muted);
      margin: 0 auto 26px;
      max-width: 720px;
      line-height: 1.6;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 18px;
    }

    .card {
      background: var(--panel);
      border-radius: var(--radius);
      padding: 22px;
      border: 1px solid var(--border);
      box-shadow: var(--shadow);
    }
    .card h3 { margin: 0 0 8px; }
    .card p { margin: 0; color: var(--muted); line-height: 1.6; }

    /* CALCULATOR */
    .calc-wrap {
      margin-top: 18px;
      display: grid;
      grid-template-columns: 1.05fr 0.95fr;
      gap: 18px;
      align-items: stretch;
    }

    .calc {
      background: var(--panel);
      border-radius: var(--radius);
      padding: 22px;
      border: 1px solid var(--border);
      box-shadow: var(--shadow);
    }

    .calc h2 { margin: 0 0 6px; font-size: 26px; text-align: left; }
    .calc .subtitle { text-align: left; margin: 0 0 16px; }

    .form-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
    }
    .row-full { grid-column: 1 / -1; }

    label {
      display: block;
      font-size: 12px;
      font-weight: 700;
      color: rgba(31,45,43,0.85);
      margin-bottom: 6px;
    }
    select, input[type="number"], input[type="range"], input[type="text"], input[type="email"], textarea {
      width: 100%;
      padding: 10px 12px;
      border-radius: 14px;
      border: 1px solid var(--border);
      background: rgba(255,255,255,0.8);
      color: var(--text);
      outline: none;
      font-size: 14px;
    }
    textarea { min-height: 96px; resize: vertical; }

    .range-line {
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      margin-top:6px;
      color: var(--muted);
      font-size: 13px;
    }

    .addons {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
      margin-top: 6px;
    }
    .check {
      display:flex;
      align-items:center;
      gap:10px;
      padding: 10px 12px;
      border-radius: 14px;
      border: 1px solid var(--border);
      background: rgba(255,255,255,0.75);
      color: var(--muted);
      font-size: 13px;
      user-select:none;
    }
    .check input { width: 16px; height: 16px; }

    .result {
      margin-top: 14px;
      padding: 14px;
      border-radius: 16px;
      border: 1px solid rgba(79,166,160,0.25);
      background: rgba(79,166,160,0.10);
    }
    .price {
      font-size: 28px;
      font-weight: 900;
      color: var(--accent-dark);
      letter-spacing: -0.2px;
    }
    .hint {
      margin-top: 6px;
      color: var(--muted);
      font-size: 13px;
      line-height: 1.5;
    }

    .mini {
      background: rgba(255,255,255,0.72);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 22px;
      box-shadow: var(--shadow);
    }

    .mini h3 { margin:0 0 8px; }
    .mini p { margin:0; color: var(--muted); line-height:1.6; }

    .cta {
      margin-top: 14px;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
    }

    .steps {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 18px;
    }
    .step {
      background: rgba(255,255,255,0.80);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 22px;
      box-shadow: var(--shadow);
    }
    .step span {
      display:inline-block;
      font-weight: 800;
      color: var(--accent-dark);
      margin-bottom: 6px;
    }
    .step p { margin:0; color: var(--muted); line-height:1.6; }

    footer {
      text-align: center;
      padding: 42px 20px;
      color: var(--muted);
      font-size: 14px;
      border-top: 1px solid var(--border);
      background: rgba(255,255,255,0.55);
      backdrop-filter: blur(8px);
    }
    footer a { color: var(--accent-dark); font-weight: 700; }

    /* MODAL */
    .modal-backdrop {
      position: fixed;
      inset: 0;
      background: rgba(15, 24, 22, 0.45);
      display: none;
      align-items: center;
      justify-content: center;
      padding: 18px;
      z-index: 100;
    }
    .modal-backdrop.open { display: flex; }
    .modal {
      width: 100%;
      max-width: 720px;
      background: rgba(255,255,255,0.92);
      border: 1px solid var(--border);
      border-radius: 20px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.18);
      padding: 18px;
      backdrop-filter: blur(10px);
    }
    .modal-head {
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap: 12px;
      padding: 8px 6px 14px;
      border-bottom: 1px solid var(--border);
    }
    .modal-title {
      font-weight: 900;
      letter-spacing: -0.2px;
      font-size: 18px;
      margin: 0;
    }
    .modal-sub {
      color: var(--muted);
      margin-top: 4px;
      font-size: 13px;
      line-height: 1.5;
    }
    .close {
      border: 1px solid var(--border);
      background: rgba(255,255,255,0.75);
      border-radius: 12px;
      padding: 8px 10px;
      cursor: pointer;
      font-weight: 800;
      color: var(--text);
    }
    .modal-body { padding: 14px 6px 6px; }
    .modal-actions {
      display:flex;
      gap:10px;
      justify-content:flex-end;
      flex-wrap:wrap;
      margin-top: 12px;
    }

    .small-note {
      color: var(--muted);
      font-size: 12px;
      margin-top: 8px;
      line-height: 1.5;
    }

    @media (max-width: 880px) {
      .calc-wrap { grid-template-columns: 1fr; }
      .hero h1 { font-size: 36px; }
      .form-grid { grid-template-columns: 1fr; }
      .addons { grid-template-columns: 1fr; }
      .modal-actions { justify-content: stretch; }
      .modal-actions .btn, .modal-actions .btn-ghost { width: 100%; }
    }
  </style>
</head>

<body>
  <!-- CONFIG -->
  <script>
    // Replace these:
    const COMPANY_EMAIL = "info@clearlinepdx.com";
    const PHONE_NUMBER = "+15035555555"; // E.164 format for tel:
  </script>

  <!-- NAV -->
  <div class="topbar">
    <div class="container">
      <div class="topbar-inner">
        <div class="brand">
          <svg viewBox="0 0 64 64" fill="none" aria-hidden="true">
            <path d="M10 28L32 10L54 28V52H38V38H26V52H10V28Z" stroke="#4fa6a0" stroke-width="3" stroke-linejoin="round"/>
            <path d="M44 24L54 44" stroke="#4fa6a0" stroke-width="3" stroke-linecap="round"/>
            <path d="M50 44H60" stroke="#4fa6a0" stroke-width="3" stroke-linecap="round"/>
          </svg>
          <div>ClearlinePDX</div>
        </div>

        <nav>
          <a class="navlink" href="index.html">Home</a>
          <a class="navlink" href="reviews.html">Reviews</a>
          <a class="navlink" href="#services">Services</a>
          <a class="navlink" href="#contact">Contact</a>
          <a class="btn-ghost" id="navCall" href="#">Call</a>
        </nav>
      </div>
    </div>
  </div>

  <!-- HERO -->
  <header class="hero">
    <div class="container">
      <h1>Clean homes. Clear standards.</h1>
      <p class="lead">
        Professional residential & small commercial cleaning in Portland.
        Transparent pricing, consistent quality, no nonsense.
      </p>

      <div class="hero-actions">
        <button class="btn" id="openQuoteTop">Book / Get Quote</button>
        <a class="btn-ghost" id="callTop" href="#">Call</a>
      </div>

      <div class="badges">
        <span class="badge">Eco-friendly options</span>
        <span class="badge">Reliable scheduling</span>
        <span class="badge">Local Portland team</span>
      </div>
    </div>
  </header>

  <!-- ESTIMATE -->
  <section id="estimate" class="container">
    <div class="calc-wrap">
      <div class="calc">
        <h2>Smart Price Estimate</h2>
        <p class="subtitle">Ballpark pricing based on Portland averages + your details.</p>

        <div class="form-grid">
          <div>
            <label for="cleanType">Cleaning Type</label>
            <select id="cleanType">
              <option value="standard" selected>Standard Cleaning</option>
              <option value="deep">Deep Cleaning</option>
              <option value="move">Move-In / Move-Out</option>
            </select>
          </div>

          <div>
            <label for="frequency">Frequency</label>
            <select id="frequency">
              <option value="onetime" selected>One-time</option>
              <option value="monthly">Monthly</option>
              <option value="biweekly">Bi-weekly</option>
              <option value="weekly">Weekly</option>
            </select>
          </div>

          <div>
            <label for="bedrooms">Bedrooms</label>
            <select id="bedrooms">
              <option value="studio">Studio</option>
              <option value="1" selected>1 Bedroom</option>
              <option value="2">2 Bedrooms</option>
              <option value="3">3 Bedrooms</option>
              <option value="4">4 Bedrooms</option>
            </select>
          </div>

          <div>
            <label for="bathrooms">Bathrooms</label>
            <select id="bathrooms">
              <option value="1" selected>1 Bath</option>
              <option value="2">2 Baths</option>
              <option value="3">3 Baths</option>
              <option value="4">4+ Baths</option>
            </select>
          </div>

          <div class="row-full">
            <label for="sqft">Approx. Square Footage</label>
            <input id="sqft" type="range" min="400" max="3500" step="50" value="900" />
            <div class="range-line">
              <span id="sqftLabel">900 sq ft</span>
              <span>Used to adjust time & effort</span>
            </div>
          </div>

          <div>
            <label for="condition">Home Condition</label>
            <select id="condition">
              <option value="light">Light (already pretty clean)</option>
              <option value="normal" selected>Normal</option>
              <option value="heavy">Heavy (buildup / lots of dust)</option>
            </select>
          </div>

          <div>
            <label for="pets">Pets</label>
            <select id="pets">
              <option value="0" selected>No pets</option>
              <option value="1">1 pet</option>
              <option value="2">2 pets</option>
              <option value="3">3+ pets</option>
            </select>
          </div>

          <div class="row-full">
            <label>Add-ons (optional)</label>
            <div class="addons">
              <label class="check"><input type="checkbox" id="addonFridge"> Inside fridge (+$25)</label>
              <label class="check"><input type="checkbox" id="addonOven"> Inside oven (+$25)</label>
              <label class="check"><input type="checkbox" id="addonCabinets"> Inside cabinets (+$35)</label>
              <label class="check"><input type="checkbox" id="addonWindows"> Interior windows (+$40)</label>
              <label class="check"><input type="checkbox" id="addonBlinds"> Blinds/detail dust (+$25)</label>
              <label class="check"><input type="checkbox" id="addonLaundry"> Laundry/folding (+$15)</label>
            </div>
          </div>
        </div>

        <div class="result" aria-live="polite">
          <div class="price" id="priceOut">$0 – $0</div>
          <div class="hint" id="hintOut">
            Estimate range includes typical variability. Final quote depends on access, condition, and special requests.
          </div>
        </div>

        <div class="cta">
          <button class="btn" id="openQuoteFromCalc">Book / Get Quote</button>
          <a class="btn-ghost" id="callFromCalc" href="#">Call</a>
        </div>
      </div>

      <div class="mini">
        <h3>Fast quotes, no games</h3>
        <p>
          Use the estimate above, then send your details. We confirm quickly and give you a final quote.
        </p>
        <p style="margin-top:12px;">
          Tip: if you want the best price, choose bi-weekly or weekly maintenance.
        </p>
        <div class="cta">
          <a class="btn-ghost" href="reviews.html">Read Reviews</a>
          <button class="btn" id="openQuoteSide">Request Quote</button>
        </div>
      </div>
    </div>
  </section>

  <!-- SERVICES -->
  <section id="services" class="container">
    <h2>Our Services</h2>
    <p class="subtitle">Pick what you need. We handle the rest.</p>

    <div class="grid">
      <div class="card">
        <h3>Standard Cleaning</h3>
        <p>Weekly / bi-weekly / monthly maintenance for homes and apartments.</p>
      </div>
      <div class="card">
        <h3>Deep Cleaning</h3>
        <p>Detailed reset: kitchens, bathrooms, buildup, and baseboards.</p>
      </div>
      <div class="card">
        <h3>Move-In / Move-Out</h3>
        <p>Perfect for rentals, landlords, and real estate turnover.</p>
      </div>
      <div class="card">
        <h3>Office & Commercial</h3>
        <p>Small offices and professional spaces — discreet and consistent.</p>
      </div>
    </div>
  </section>

  <!-- HOW IT WORKS -->
  <section class="container">
    <h2>How It Works</h2>
    <p class="subtitle">Simple. Predictable. No headaches.</p>

    <div class="steps">
      <div class="step">
        <span>1) Estimate</span>
        <p>Use the calculator to get a ballpark range.</p>
      </div>
      <div class="step">
        <span>2) Request a Quote</span>
        <p>Send details via the quote form (takes 30 seconds).</p>
      </div>
      <div class="step">
        <span>3) Clean</span>
        <p>We show up on time and deliver professional results.</p>
      </div>
    </div>
  </section>

  <!-- CONTACT -->
  <section id="contact" class="container">
    <h2>Contact</h2>
    <p class="subtitle">Send bedrooms/baths, cleaning type, sq ft, and preferred day/time.</p>

    <div class="grid">
      <div class="card">
        <h3>Email</h3>
        <p><a id="emailLink" href="#">info@clearlinepdx.com</a></p>
        <p style="margin-top:10px; font-size:13px; color:var(--muted);">We typically respond the same day.</p>
      </div>

      <div class="card">
        <h3>Phone</h3>
        <p><a id="phoneLink" href="#">(503) 555-5555</a></p>
        <p style="margin-top:10px; font-size:13px; color:var(--muted);">Mon–Sat 8:00 AM – 6:00 PM</p>
      </div>

      <div class="card">
        <h3>Service Area</h3>
        <p>Portland + nearby neighborhoods.</p>
        <p style="margin-top:10px; font-size:13px; color:var(--muted);">Ask if you’re outside the city.</p>
      </div>
    </div>
  </section>

  <footer>
    © 2025 ClearlinePDX · Portland, OR · <a href="reviews.html">Reviews</a>
  </footer>

  <!-- QUOTE MODAL -->
  <div class="modal-backdrop" id="quoteModal" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="quoteTitle">
      <div class="modal-head">
        <div>
          <div class="modal-title" id="quoteTitle">Request a Quote</div>
          <div class="modal-sub">Fill this out and your email will open with a pre-written message. Send it to us.</div>
        </div>
        <button class="close" id="closeModal" aria-label="Close">✕</button>
      </div>

      <div class="modal-body">
        <div class="form-grid">
          <div>
            <label for="qName">Name</label>
            <input id="qName" type="text" placeholder="Your name" />
          </div>
          <div>
            <label for="qPhone">Phone</label>
            <input id="qPhone" type="text" placeholder="(503) ..." />
          </div>
          <div class="row-full">
            <label for="qEmail">Your Email (optional)</label>
            <input id="qEmail" type="email" placeholder="you@email.com" />
          </div>
          <div class="row-full">
            <label for="qMessage">Extra details (optional)</label>
            <textarea id="qMessage" placeholder="Preferred day/time, parking/access notes, special requests..."></textarea>
          </div>
        </div>

        <div class="small-note">
          Tip: If you don’t have a mail app installed, use Gmail in a browser — it will still work.
        </div>

        <div class="modal-actions">
          <a class="btn-ghost" id="modalCall" href="#">Call Instead</a>
          <button class="btn" id="sendEmail">Open Email to Send</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    // ===== Market averages base =====
    const base = {
      standard: { studio: 103, "1": 128, "2": 160, "3": 213, "4": 290 },
      deep:     { studio: 195, "1": 195, "2": 240, "3": 320, "4": 420 },
      move:     { studio: 240, "1": 240, "2": 310, "3": 400, "4": 525 }
    };

    const includedBaths = { studio: 1, "1": 1, "2": 1, "3": 2, "4": 2 };
    const extraBathAdd = { standard: 25, deep: 35, move: 45 };
    const freqMultiplier = { onetime: 1.00, monthly: 1.00, biweekly: 0.92, weekly: 0.88 };
    const conditionMultiplier = { light: 0.92, normal: 1.00, heavy: 1.18 };
    const baselineSqft = { studio: 500, "1": 850, "2": 1200, "3": 1700, "4": 2300 };
    const sqftStep = 250;
    const sqftAddPerStep = { standard: 10, deep: 14, move: 16 };
    const petAdd = {
      standard: [0, 10, 18, 25],
      deep:     [0, 12, 22, 30],
      move:     [0, 12, 22, 30]
    };
    const addOns = [
      { id: "addonFridge",  price: 25, label: "Inside fridge" },
      { id: "addonOven",    price: 25, label: "Inside oven" },
      { id: "addonCabinets",price: 35, label: "Inside cabinets" },
      { id: "addonWindows", price: 40, label: "Interior windows" },
      { id: "addonBlinds",  price: 25, label: "Blinds/detail dust" },
      { id: "addonLaundry", price: 15, label: "Laundry/folding" }
    ];

    // Elements
    const elType = document.getElementById("cleanType");
    const elFreq = document.getElementById("frequency");
    const elBeds = document.getElementById("bedrooms");
    const elBath = document.getElementById("bathrooms");
    const elSqft = document.getElementById("sqft");
    const elSqftLabel = document.getElementById("sqftLabel");
    const elCond = document.getElementById("condition");
    const elPets = document.getElementById("pets");
    const priceOut = document.getElementById("priceOut");
    const hintOut = document.getElementById("hintOut");

    function clamp(n, min, max){ return Math.max(min, Math.min(max, n)); }

    function calcAddOns() {
      let sum = 0;
      for (const a of addOns) {
        const box = document.getElementById(a.id);
        if (box && box.checked) sum += a.price;
      }
      return sum;
    }

    function listSelectedAddOns() {
      const chosen = [];
      for (const a of addOns) {
        const box = document.getElementById(a.id);
        if (box && box.checked) chosen.push(a.label);
      }
      return chosen;
    }

    function calcSqftAdj(type, beds, sqft) {
      const baseSq = baselineSqft[beds] ?? 1000;
      const diff = sqft - baseSq;
      if (diff <= 0) return 0;
      const steps = Math.ceil(diff / sqftStep);
      return steps * (sqftAddPerStep[type] ?? 10);
    }

    function calcBathAdj(type, beds, baths) {
      const included = includedBaths[beds] ?? 1;
      const extra = Math.max(0, baths - included);
      return extra * (extraBathAdd[type] ?? 25);
    }

    // Keeps last estimate for email message
    let lastEstimate = { min: 0, max: 0 };

    function estimate() {
      const type = elType.value;
      const freq = elFreq.value;
      const beds = elBeds.value;
      const baths = parseInt(elBath.value, 10);
      const sqft = parseInt(elSqft.value, 10);
      const cond = elCond.value;
      const pets = parseInt(elPets.value, 10);

      elSqftLabel.textContent = `${sqft} sq ft`;

      let total = (base[type][beds] ?? 0);
      total += calcBathAdj(type, beds, baths);
      total += calcSqftAdj(type, beds, sqft);
      total += (petAdd[type] ? petAdd[type][clamp(pets,0,3)] : 0);
      total += calcAddOns();
      total *= (conditionMultiplier[cond] ?? 1.0);
      total *= (freqMultiplier[freq] ?? 1.0);

      const min = Math.round(total * 0.90);
      const max = Math.round(total * 1.10);

      lastEstimate = { min, max };

      priceOut.textContent = `$${min} – $${max}`;

      const freqText = {
        onetime: "one-time",
        monthly: "monthly",
        biweekly: "bi-weekly (discount applied)",
        weekly: "weekly (discount applied)"
      }[freq] || "one-time";

      const typeText = {
        standard: "Standard",
        deep: "Deep",
        move: "Move-In/Move-Out"
      }[type] || "Standard";

      hintOut.textContent =
        `Based on Portland averages for ${typeText} cleaning, adjusted for ${baths} bath(s), ${sqft} sq ft, ${cond} condition, and ${freqText}.`;
    }

    // Bind events for estimate
    const inputs = [elType, elFreq, elBeds, elBath, elSqft, elCond, elPets];
    inputs.forEach(x => x.addEventListener("change", estimate));
    elSqft.addEventListener("input", estimate);
    addOns.forEach(a => {
      const box = document.getElementById(a.id);
      if (box) box.addEventListener("change", estimate);
    });
    estimate();

    // ===== Contact links =====
    const phoneHref = `tel:${PHONE_NUMBER}`;
    document.getElementById("navCall").href = phoneHref;
    document.getElementById("callTop").href = phoneHref;
    document.getElementById("callFromCalc").href = phoneHref;
    document.getElementById("phoneLink").href = phoneHref;
    document.getElementById("phoneLink").textContent = PHONE_NUMBER.replace("+1", "(503) ") || PHONE_NUMBER;

    document.getElementById("emailLink").href = `mailto:${COMPANY_EMAIL}`;
    document.getElementById("emailLink").textContent = COMPANY_EMAIL;

    // ===== Modal logic =====
    const modal = document.getElementById("quoteModal");
    const openers = ["openQuoteTop", "openQuoteFromCalc", "openQuoteSide"].map(id => document.getElementById(id));
    const closer = document.getElementById("closeModal");
    const modalCall = document.getElementById("modalCall");
    modalCall.href = phoneHref;

    function openModal(){
      modal.classList.add("open");
      modal.setAttribute("aria-hidden","false");
      // prefill message placeholder with estimate
      setTimeout(() => document.getElementById("qName").focus(), 0);
    }
    function closeModal(){
      modal.classList.remove("open");
      modal.setAttribute("aria-hidden","true");
    }
    openers.forEach(btn => btn && btn.addEventListener("click", openModal));
    closer.addEventListener("click", closeModal);
    modal.addEventListener("click", (e) => { if (e.target === modal) closeModal(); });
    document.addEventListener("keydown", (e) => { if (e.key === "Escape") closeModal(); });

    // ===== Send Email (mailto) =====
    document.getElementById("sendEmail").addEventListener("click", () => {
      const name = document.getElementById("qName").value.trim();
      const phone = document.getElementById("qPhone").value.trim();
      const fromEmail = document.getElementById("qEmail").value.trim();
      const extra = document.getElementById("qMessage").value.trim();

      const type = elType.value;
      const freq = elFreq.value;
      const beds = elBeds.value;
      const baths = elBath.value;
      const sqft = elSqft.value;
      const cond = elCond.value;
      const pets = elPets.value;
      const chosenAddOns = listSelectedAddOns();

      const typeText = { standard:"Standard", deep:"Deep", move:"Move-In/Move-Out" }[type] || type;
      const freqText = { onetime:"One-time", monthly:"Monthly", biweekly:"Bi-weekly", weekly:"Weekly" }[freq] || freq;
      const bedsText = (beds === "studio") ? "Studio" : `${beds} Bedroom`;
      const addOnText = chosenAddOns.length ? chosenAddOns.join(", ") : "None";

      const subject = `Quote request – ${typeText} – ${bedsText} / ${baths} bath`;
      const body =
`Hi ClearlinePDX,

I’d like a quote and scheduling options.

Customer:
- Name: ${name || "(not provided)"}
- Phone: ${phone || "(not provided)"}
- Email: ${fromEmail || "(not provided)"}

Details:
- Cleaning type: ${typeText}
- Frequency: ${freqText}
- Bedrooms: ${bedsText}
- Bathrooms: ${baths}
- Approx. sq ft: ${sqft}
- Condition: ${cond}
- Pets: ${pets}
- Add-ons: ${addOnText}

Estimated range shown on site: $${lastEstimate.min} – $${lastEstimate.max}

Extra notes:
${extra || "(none)"}

Thank you!`;

      const mailto = `mailto:${encodeURIComponent(COMPANY_EMAIL)}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
      window.location.href = mailto;
    });
  </script>
</body>
</html>
